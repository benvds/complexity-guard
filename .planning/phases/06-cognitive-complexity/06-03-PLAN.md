---
phase: 06-cognitive-complexity
plan: 03
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - docs/cognitive-complexity.md
  - docs/cyclomatic-complexity.md
  - README.md
  - docs/getting-started.md
  - docs/cli-reference.md
  - docs/examples.md
autonomous: true
requirements:
  - COGN-01
  - COGN-09

must_haves:
  truths:
    - "Docs page explains cognitive complexity: what it measures, how it differs from cyclomatic, key counting rules"
    - "Docs page credits SonarSource and cites G. Ann Campbell's whitepaper"
    - "Matching docs page exists for cyclomatic complexity"
    - "README references both docs pages"
    - "README features list includes cognitive complexity"
    - "CLI reference documents cognitive threshold configuration"
    - "Examples show cognitive complexity scenarios"
  artifacts:
    - path: "docs/cognitive-complexity.md"
      provides: "Detailed explanation of cognitive complexity metric (~300 words)"
      contains: "SonarSource"
    - path: "docs/cyclomatic-complexity.md"
      provides: "Detailed explanation of cyclomatic complexity metric (~300 words)"
      contains: "McCabe"
    - path: "README.md"
      provides: "Updated features list and example output with cognitive complexity"
      contains: "cognitive"
    - path: "docs/cli-reference.md"
      provides: "Cognitive threshold configuration documentation"
      contains: "cognitive"
    - path: "docs/examples.md"
      provides: "Examples with cognitive complexity scenarios"
      contains: "cognitive"
  key_links:
    - from: "README.md"
      to: "docs/cognitive-complexity.md"
      via: "markdown link"
      pattern: "cognitive-complexity\\.md"
    - from: "README.md"
      to: "docs/cyclomatic-complexity.md"
      via: "markdown link"
      pattern: "cyclomatic-complexity\\.md"
---

<objective>
Create documentation for cognitive and cyclomatic complexity metrics, and update all user-facing docs (README, getting-started, CLI reference, examples) to reflect the new cognitive complexity feature.

Purpose: Users need to understand what cognitive complexity measures, how it differs from cyclomatic, and how to configure thresholds. Locked decision requires crediting SonarSource/G. Ann Campbell.
Output: Two new docs pages, updated README, updated getting-started, CLI reference, and examples.
</objective>

<execution_context>
@/Users/benvds/.claude/get-shit-done/workflows/execute-plan.md
@/Users/benvds/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-cognitive-complexity/06-CONTEXT.md
@.planning/phases/06-cognitive-complexity/06-RESEARCH.md
@README.md
@docs/getting-started.md
@docs/cli-reference.md
@docs/examples.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create cognitive and cyclomatic complexity docs pages</name>
  <files>docs/cognitive-complexity.md, docs/cyclomatic-complexity.md</files>
  <action>
**docs/cognitive-complexity.md (~300 words):**

Follow the friendly, thorough tone established in existing docs (TanStack/Astro style per user decision from Phase 05.1).

Structure:
1. **Title:** "Cognitive Complexity"
2. **What it measures:** Explain cognitive complexity measures how difficult code is to *understand* — not how many paths exist through it. Created by G. Ann Campbell at SonarSource in 2016. Penalizes nesting: an `if` at depth 2 costs more than at depth 0.
3. **How it works:** Three types of increments:
   - Structural increments: control flow structures (if, for, while, switch, catch, ternary) add `1 + nesting_depth`. They also increase the nesting level for their body.
   - Flat increments: else clauses, logical operators (&&, ||, ??), recursive calls, labeled break/continue add exactly 1 regardless of nesting.
   - What does NOT count: try blocks, finally blocks, optional chaining (?.), throw, return, individual switch cases.
4. **ComplexityGuard deviations from SonarSource:** Document clearly:
   - Logical operators: each counts +1 individually (SonarSource groups same-operator sequences as 1). Simpler mental model.
   - Top-level arrow functions (`const fn = () => {}`) do NOT add nesting — treated like function declarations.
5. **Default thresholds:** Warning at 15, error at 25 (SonarSource recommendations). Configurable via `.complexityguard.json`.
6. **Example:** Show a brief annotated code example with score breakdown.
7. **Attribution:** "Cognitive complexity was created by G. Ann Campbell. See the [original whitepaper](https://www.sonarsource.com/docs/CognitiveComplexity.pdf) for the complete specification."
8. **See also:** Link to cyclomatic-complexity.md.

**docs/cyclomatic-complexity.md (~300 words):**

Matching format and style.

Structure:
1. **Title:** "Cyclomatic Complexity"
2. **What it measures:** Explain cyclomatic complexity counts the number of independent paths through a function. Created by Thomas McCabe in 1976. Indicates testability — a function with cyclomatic complexity N needs at least N test cases.
3. **How it works:** Base complexity of 1. Each branch point (if, for, while, switch case, catch, ternary, &&, ||, ??) adds 1. ComplexityGuard uses ESLint-aligned counting by default.
4. **Counting rules:**
   - Control flow: if, for, for-of, while, do-while, catch each add 1
   - Switch: each case adds 1 (classic mode, default) or switch adds 1 (modified mode)
   - Logical operators: &&, ||, ?? each add 1
   - Optional chaining: ?. adds 1
   - Ternary: ? : adds 1
5. **Default thresholds:** Warning at 10 (McCabe), error at 20 (ESLint). Configurable via `.complexityguard.json`.
6. **How it differs from cognitive complexity:** Brief comparison — cyclomatic measures testability (paths), cognitive measures readability (human comprehension). They're complementary.
7. **Attribution:** "Cyclomatic complexity was introduced by Thomas J. McCabe, Sr. in 1976."
8. **See also:** Link to cognitive-complexity.md.
  </action>
  <verify>
    Verify both files exist with approximately 300 words each. Check that cognitive-complexity.md mentions SonarSource and G. Ann Campbell. Check that cyclomatic-complexity.md mentions McCabe. Check cross-references exist.
  </verify>
  <done>Both docs pages exist with clear explanations, proper attribution, and cross-references.</done>
</task>

<task type="auto">
  <name>Task 2: Update README, getting-started, CLI reference, and examples</name>
  <files>README.md, docs/getting-started.md, docs/cli-reference.md, docs/examples.md</files>
  <action>
**README.md updates:**

1. Update the "Example Output" section to show the new side-by-side format:
   ```
   src/auth/login.ts
     42:0  ✓  ok  Function 'validateCredentials' cyclomatic 3 cognitive 2
     67:0  ⚠  warning  Function 'processLoginFlow' cyclomatic 12 cognitive 18
     89:2  ✗  error  Method 'handleComplexAuthFlow' cyclomatic 25 cognitive 32

   Analyzed 12 files, 47 functions
   Found 3 warnings, 1 errors

   Top cyclomatic hotspots:
     1. handleComplexAuthFlow (src/auth/login.ts:89) complexity 25
     2. processPayment (src/checkout/payment.ts:156) complexity 18

   Top cognitive hotspots:
     1. handleComplexAuthFlow (src/auth/login.ts:89) complexity 32
     2. processLoginFlow (src/auth/login.ts:67) complexity 18

   ✗ 4 problems (1 errors, 3 warnings)
   ```

2. Update the "Features" section — add cognitive complexity bullet:
   - **Cognitive Complexity**: SonarSource-based metric measuring code *understandability* with nesting depth penalties
   - Update cyclomatic bullet to mention "complementary to cognitive complexity"

3. Add a "Learn More" or "Metrics" section with links:
   - [Cognitive Complexity](docs/cognitive-complexity.md) — what it measures and how it works
   - [Cyclomatic Complexity](docs/cyclomatic-complexity.md) — what it measures and how it works

4. Update the config example snippet (if there is one showing thresholds) to include cognitive thresholds.

**docs/getting-started.md updates:**

1. In the section about what the tool does or first-run expectations, mention that ComplexityGuard measures both cyclomatic and cognitive complexity.
2. Add a brief note about the two metrics: cyclomatic for testability, cognitive for readability.
3. If there's a "What you'll see" section or example output, update it to show side-by-side format.
4. If there's a configuration section, add cognitive threshold example.

**docs/cli-reference.md updates:**

1. If there's a thresholds section, add cognitive threshold documentation:
   ```json
   {
     "analysis": {
       "thresholds": {
         "cyclomatic": { "warning": 10, "error": 20 },
         "cognitive": { "warning": 15, "error": 25 }
       }
     }
   }
   ```
2. Update any output format description to mention both metrics.

**docs/examples.md updates:**

1. Update "Configuration Recipes" to include cognitive thresholds alongside cyclomatic:
   - Strict mode: cyclomatic warning=5/error=10, cognitive warning=8/error=15
   - Lenient mode: cyclomatic warning=20/error=40, cognitive warning=25/error=50
2. Update JSON output examples to show populated cognitive field.
3. Update jq queries to include cognitive:
   ```sh
   # Functions with high cognitive complexity
   complexity-guard --format json src/ | jq '.files[].functions[] | select(.cognitive > 15)'
   ```
4. Add a section or update existing recipes about "Comparing Metrics":
   ```sh
   # Find functions where cognitive is much higher than cyclomatic (deeply nested code)
   complexity-guard --format json src/ | jq '.files[].functions[] | select(.cognitive > .cyclomatic * 2) | {name, cyclomatic, cognitive}'
   ```
  </action>
  <verify>
    Read each updated file to verify cognitive complexity is mentioned. Check README has updated example output. Check cli-reference has cognitive threshold config. Check examples have cognitive-aware recipes.
  </verify>
  <done>All user-facing documentation updated to reflect cognitive complexity feature. README, getting-started, CLI reference, and examples all include cognitive complexity.</done>
</task>

</tasks>

<verification>
1. `docs/cognitive-complexity.md` exists with ~300 words, credits SonarSource/G. Ann Campbell
2. `docs/cyclomatic-complexity.md` exists with ~300 words, credits McCabe
3. README.md features list includes cognitive complexity
4. README.md example output shows side-by-side format
5. README.md links to both docs pages
6. docs/cli-reference.md documents cognitive threshold configuration
7. docs/examples.md includes cognitive complexity recipes
</verification>

<success_criteria>
- Both metric docs pages provide clear, helpful explanations a developer can understand in 2 minutes
- SonarSource whitepaper properly credited
- All user-facing docs reflect the new dual-metric output
- Documentation follows existing friendly/thorough tone
- No deferred ideas (combined hotspot list, strict SonarSource mode) appear in docs
</success_criteria>

<output>
After completion, create `.planning/phases/06-cognitive-complexity/06-03-SUMMARY.md`
</output>
