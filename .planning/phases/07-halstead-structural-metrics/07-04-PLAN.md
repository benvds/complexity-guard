---
phase: 07-halstead-structural-metrics
plan: 04
type: execute
wave: 3
depends_on:
  - 07-03
files_modified:
  - README.md
  - docs/getting-started.md
  - docs/cli-reference.md
  - docs/examples.md
  - docs/halstead-metrics.md
  - docs/structural-metrics.md
  - publication/npm/README.md
  - publication/npm/packages/darwin-arm64/README.md
  - publication/npm/packages/darwin-x64/README.md
  - publication/npm/packages/linux-arm64/README.md
  - publication/npm/packages/linux-x64/README.md
  - publication/npm/packages/windows-x64/README.md
autonomous: true
requirements:
  - HALT-01
  - HALT-02
  - HALT-03
  - HALT-05
  - STRC-01
  - STRC-02
  - STRC-03
  - STRC-06

must_haves:
  truths:
    - "README.md documents Halstead and structural metrics as available features"
    - "Dedicated docs pages explain Halstead formulas and structural metric definitions"
    - "CLI reference documents --metrics flag with halstead and structural as options"
    - "Examples page shows Halstead and structural metric output"
    - "Publication README files stay in sync with main README"
  artifacts:
    - path: "README.md"
      provides: "Updated feature list and overview including Halstead/structural metrics"
      contains: "Halstead"
    - path: "docs/halstead-metrics.md"
      provides: "Dedicated Halstead metrics documentation page"
      contains: "volume"
    - path: "docs/structural-metrics.md"
      provides: "Dedicated structural metrics documentation page"
      contains: "logical lines"
    - path: "docs/cli-reference.md"
      provides: "Updated CLI reference with --metrics flag options"
      contains: "--metrics"
  key_links:
    - from: "README.md"
      to: "docs/halstead-metrics.md"
      via: "documentation link"
      pattern: "halstead-metrics"
    - from: "README.md"
      to: "docs/structural-metrics.md"
      via: "documentation link"
      pattern: "structural-metrics"
---

<objective>
Document Halstead and structural metrics in all user-facing documentation: README, dedicated docs pages, CLI reference, examples, and publication README files.

Purpose: Users need clear documentation to understand what metrics are computed, how they work, what thresholds mean, and how to configure them. Following TanStack/Astro-style progressive disclosure.
Output: Updated README, new docs pages for Halstead and structural metrics, updated CLI reference and examples.
</objective>

<execution_context>
@/Users/benvds/.claude/get-shit-done/workflows/execute-plan.md
@/Users/benvds/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-halstead-structural-metrics/07-03-SUMMARY.md
@README.md
@docs/getting-started.md
@docs/cli-reference.md
@docs/examples.md
@docs/cognitive-complexity.md
@docs/cyclomatic-complexity.md
@publication/npm/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Halstead and structural metrics docs pages and update existing docs</name>
  <files>docs/halstead-metrics.md, docs/structural-metrics.md, docs/getting-started.md, docs/cli-reference.md, docs/examples.md</files>
  <action>
    **1a. Create docs/halstead-metrics.md:**
    Follow the pattern established by docs/cognitive-complexity.md and docs/cyclomatic-complexity.md:
    - Title: "Halstead Metrics"
    - Brief intro: information-theoretic metrics measuring vocabulary diversity and mental effort
    - Credit: Maurice Halstead (1977) "Elements of Software Science"
    - Explain the base counts: n1 (distinct operators), n2 (distinct operands), N1 (total operators), N2 (total operands)
    - Explain derived metrics with formulas: vocabulary, volume, difficulty, effort, time, bugs
    - What counts as operators vs operands in JS/TS (table format)
    - TypeScript: type-only syntax excluded (TS scores same as JS), decorators count as operators
    - Default thresholds table: volume (500/1000), difficulty (10/20), effort (5000/10000), bugs (0.5/2.0)
    - Example function with annotated Halstead breakdown
    - Configuration example showing how to customize thresholds in .complexityguard.json
    - Link back to CLI reference for --metrics flag

    **1b. Create docs/structural-metrics.md:**
    - Title: "Structural Metrics"
    - Brief intro: shape-based code properties complementing flow-based metrics
    - Metrics covered:
      - Function length: logical lines (excludes blanks, comments), single-expression arrows = 1
      - Parameter count: runtime + generic type params
      - Nesting depth: max depth of control flow nesting within function
      - File length: logical lines for entire file
      - Export count: number of export statements
    - Default thresholds table: function_length (25/50), params (3/6), nesting (3/5), file_length (300/600), exports (15/30)
    - Why these thresholds matter (single responsibility, readability)
    - Configuration example for .complexityguard.json
    - Link to CLI reference

    **1c. Update docs/cli-reference.md:**
    - Add `--metrics` flag documentation: "Select which metric families to compute. Comma-separated list. Available: cyclomatic, cognitive, halstead, structural. Default: all."
    - Example: `complexity-guard src/ --metrics cyclomatic,halstead`
    - Update threshold configuration section to include Halstead and structural thresholds

    **1d. Update docs/getting-started.md:**
    - Update the "What it measures" section to include Halstead and structural metrics
    - Add brief mentions of the new metrics in the quick start flow

    **1e. Update docs/examples.md:**
    - Add example showing verbose output with all 4 metric families
    - Add example showing --metrics flag to filter to specific families
    - Add example of JSON output with Halstead/structural fields populated
    - Show example of a function triggering Halstead volume warning
  </action>
  <verify>
    Verify all docs files exist and contain expected content:
    - docs/halstead-metrics.md mentions "volume", "difficulty", "effort", "operators", "operands"
    - docs/structural-metrics.md mentions "logical lines", "parameter count", "nesting depth"
    - docs/cli-reference.md mentions "--metrics" flag with halstead/structural options
    - docs/examples.md shows Halstead/structural in example output
  </verify>
  <done>
    New docs pages for Halstead and structural metrics created. CLI reference documents --metrics flag. Examples show all metric families. Getting started updated with new metric overview.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update README and publication README files</name>
  <files>README.md, publication/npm/README.md, publication/npm/packages/darwin-arm64/README.md, publication/npm/packages/darwin-x64/README.md, publication/npm/packages/linux-arm64/README.md, publication/npm/packages/linux-x64/README.md, publication/npm/packages/windows-x64/README.md</files>
  <action>
    **2a. Update README.md:**
    - Update features/metrics section to list all 4 metric families: cyclomatic complexity, cognitive complexity, Halstead metrics, structural metrics
    - Add brief descriptions of Halstead (vocabulary, volume, difficulty, effort, estimated bugs) and structural (function length, params, nesting, file length, exports)
    - Add links to new docs pages: docs/halstead-metrics.md, docs/structural-metrics.md
    - Update example output to show the new metrics in action (verbose mode with Halstead/structural values)
    - Mention --metrics flag for selective metric computation in the CLI section
    - Update any "coming soon" or future references to Halstead/structural to reflect they are now implemented

    **2b. Update publication/npm/README.md:**
    Keep in sync with the main README. Update the same sections: features, metrics list, example output. The npm README should be a concise version of the main README focused on npm-specific installation + feature overview.

    **2c. Update platform package READMEs (all 5):**
    These are typically shorter. Update the feature bullet list to include Halstead and structural metrics. Each platform README at publication/npm/packages/{platform}/README.md should list the updated metrics.

    Keep the friendly, thorough TanStack/Astro tone (per locked decision from Phase 05.1).
  </action>
  <verify>
    - README.md mentions "Halstead" and "structural metrics"
    - publication/npm/README.md mentions "Halstead" and "structural metrics"
    - All 5 platform READMEs mention updated metrics
  </verify>
  <done>
    Main README updated with Halstead and structural metrics. Publication README files synced. All user-facing documentation reflects the current state of the tool.
  </done>
</task>

</tasks>

<verification>
- All documentation files exist and are coherent
- No references to "coming soon" for Halstead or structural metrics
- Links between docs pages work (relative paths correct)
- README and publication READMEs are in sync
- TanStack/Astro friendly tone maintained
</verification>

<success_criteria>
- docs/halstead-metrics.md created with formulas, thresholds, examples
- docs/structural-metrics.md created with metric definitions, thresholds
- docs/cli-reference.md documents --metrics flag
- docs/examples.md shows all 4 metric families in output
- README.md lists all 4 metric families as implemented features
- All 6 publication README files updated to reflect new metrics
- Documentation tone is friendly and thorough (TanStack/Astro style)
</success_criteria>

<output>
After completion, create `.planning/phases/07-halstead-structural-metrics/07-04-SUMMARY.md`
</output>
